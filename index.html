<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pemilihan Kelompok 35 Murid ğŸŒˆ</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    padding: 20px; 
    background: linear-gradient(135deg, #fdfbfb, #ebedee);
  }
  h2 { text-align: center; color: #333; }
  input, button, label { margin: 5px 0; padding: 5px; font-size: 16px; }
  button { cursor: pointer; background-color: #4CAF50; color: white; border: none; border-radius: 5px; }
  button:hover { background-color: #45a049; }
  table { border-collapse: collapse; margin-top: 20px; width: 100%; }
  th, td { border: 2px solid #333; padding: 10px; text-align: center; font-weight: bold; }
  th { background-color: #ffcc00; }
  td { transition: transform 0.2s; }
  td:hover { transform: scale(1.1); }
</style>
</head>
<body>
<h2>ğŸ‰ Pemilihan Kelompok 35 Murid ğŸŒˆ</h2>

<label>Jumlah kelompok:</label>
<input type="number" id="groupCount" min="1" value="5"><br>

<input type="checkbox" id="keepGirlsTogether">
<label for="keepGirlsTogether">Siswi tetap bersama ğŸ‘§ğŸ‘§ğŸ‘§</label><br>

<button onclick="generateGroups()">ğŸ² Acak Kelompok</button>
<button onclick="copyGroups()">ğŸ“‹ Salin Kelompok</button>

<div id="groupsContainer"></div>

<script>
  // Data murid
  const putri = ["ğŸ‘§ Siswi 1","ğŸ‘§ Siswi 2","ğŸ‘§ Siswi 3"];
  const putra = [];
  for(let i=1;i<=32;i++){ putra.push("ğŸ§‘ Murid " + i); }

  const colors = ["#FFB6C1","#87CEFA","#90EE90","#FFD700","#FFA07A","#DA70D6","#40E0D0"];
  let currentGroups = [];

  function shuffle(array) {
    return array.sort(()=>Math.random()-0.5);
  }

  function generateGroups(){
    const numGroups = parseInt(document.getElementById('groupCount').value);
    const keepGirlsTogether = document.getElementById('keepGirlsTogether').checked;
    if(numGroups < 1){ alert('Masukkan jumlah kelompok valid!'); return; }

    const totalParticipants = [...putra,...putri];
    const baseSize = Math.floor(totalParticipants.length/numGroups);
    const extra = totalParticipants.length % numGroups;

    let shuffledPutra = shuffle([...putra]);
    let shuffledPutri = shuffle([...putri]);
    let groups = Array.from({length:numGroups},()=>[]);

    // LOGIKA SISWI
    if(keepGirlsTogether){
      if(baseSize >= 3){ // Siswi tetap bersama
        const girlGroupIndex = Math.floor(Math.random()*numGroups);
        groups[girlGroupIndex] = [...shuffledPutri];
        let ptr=0;
        for(let i=0;i<numGroups;i++){
          let target = baseSize + (i<extra?1:0);
          if(i===girlGroupIndex) target = Math.max(groups[i].length,target);
          while(groups[i].length < target && ptr < shuffledPutra.length){
            groups[i].push(shuffledPutra[ptr]); ptr++;
          }
        }
      } else { // baseSize <3 â†’ siswi dicampur
        const allParticipants = shuffle([...putra,...putri]);
        let ptr=0;
        for(let i=0;i<numGroups;i++){
          let target = baseSize + (i<extra?1:0);
          while(groups[i].length<target && ptr<allParticipants.length){
            groups[i].push(allParticipants[ptr]);
            ptr++;
          }
        }
      }
    } else { // Siswi dicampur
      const allParticipants = shuffle([...putra,...putri]);
      let ptr=0;
      for(let i=0;i<numGroups;i++){
        let target = baseSize + (i<extra?1:0);
        while(groups[i].length<target && ptr<allParticipants.length){
          groups[i].push(allParticipants[ptr]);
          ptr++;
        }
      }
    }

    currentGroups = groups;
    renderTable(groups);
  }

  function renderTable(groups){
    const container = document.getElementById('groupsContainer');
    container.innerHTML = '<h3>ğŸŒŸ Hasil Kelompok:</h3>';
    const table = document.createElement('table');

    const headerRow = document.createElement('tr');
    groups.forEach((g,i)=>{
      const th = document.createElement('th');
      th.textContent = `Kelompok ${i+1} ğŸ¯`;
      th.style.backgroundColor = colors[i % colors.length];
      headerRow.appendChild(th);
    });
    table.appendChild(headerRow);

    const maxRows = Math.max(...groups.map(g=>g.length));
    for(let r=0;r<maxRows;r++){
      const row = document.createElement('tr');
      groups.forEach((g,i)=>{
        const td = document.createElement('td');
        td.textContent = g[r]?g[r]:"";
        td.style.backgroundColor = colors[i % colors.length]+"55";
        row.appendChild(td);
      });
      table.appendChild(row);
    }

    container.appendChild(table);
  }

  function copyGroups(){
    if(currentGroups.length === 0){ alert("Belum ada kelompok untuk disalin!"); return; }
    let text = "";
    currentGroups.forEach((g,i)=>{
      text += `Kelompok ${i+1}:\n`;
      g.forEach(murid=>{
        text += `- ${murid}\n`;
      });
      text += "\n";
    });
    navigator.clipboard.writeText(text).then(()=>{
      alert("âœ… Kelompok berhasil disalin ke clipboard!");
    }).catch(err=>{
      alert("âŒ Gagal menyalin kelompok: " + err);
    });
  }
</script>
</body>
</html>
